(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9527:function(t,e,n){Promise.resolve().then(n.bind(n,8810)),Promise.resolve().then(n.t.bind(n,6087,23)),Promise.resolve().then(n.t.bind(n,2445,23))},8810:function(t,e,n){"use strict";n.r(e),n.d(e,{AuthProvider:function(){return a},useAuth:function(){return o}});var i=n(7437),r=n(2265),s=n(5922);let u=(0,r.createContext)(void 0);function a(t){let{children:e}=t,[n,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{!async function(){l(!0);try{let{data:{user:t}}=await s.O.auth.getUser();a(t)}finally{l(!1)}}();let{data:{subscription:t}}=s.O.auth.onAuthStateChange((t,e)=>{a((null==e?void 0:e.user)||null)});return()=>t.unsubscribe()},[]);let c=async(t,e)=>{let{data:n,error:i}=await s.O.auth.signInWithPassword({email:t,password:e});if(i)throw i;return n},f=async(t,e,n)=>{if(!t.endsWith("@ugt.es"))throw Error("Solo se permiten correos del dominio @ugt.es");let{data:i,error:r}=await s.O.auth.signUp({email:t,password:e,options:{data:{full_name:n}}});if(r)throw r;return i.user&&await s.O.from("profiles").insert([{id:i.user.id,email:i.user.email,full_name:n,role:"tecnico",is_active:!0}]),i},d=async()=>{await s.O.auth.signOut()};return(0,i.jsx)(u.Provider,{value:{user:n,loading:o,signIn:c,signUp:f,signOut:d},children:e})}function o(){let t=(0,r.useContext)(u);if(void 0===t)throw Error("useAuth debe usarse dentro de un AuthProvider");return t}},5922:function(t,e,n){"use strict";n.d(e,{O:function(){return i}});let i=(0,n(359).eI)("https://ebiqbjgrmjdkwlckmpuj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImViaXFiamdybWpka3dsY2ttcHVqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMjkyMDUsImV4cCI6MjA3NzYwNTIwNX0.OBCL4RWR3A536ZZrAof_tI5QNDYRJeA5x6HXv-P4d6s")},2445:function(){},6087:function(t){t.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(t){t.O(0,[673,971,938,744],function(){return t(t.s=9527)}),_N_E=t.O()}]);