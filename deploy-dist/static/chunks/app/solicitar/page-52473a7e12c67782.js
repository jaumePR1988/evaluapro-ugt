(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[680],{2898:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var i=a(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let a=(0,i.forwardRef)(({color:a="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,...m},u)=>(0,i.createElement)("svg",{ref:u,...s,width:n,height:n,stroke:a,strokeWidth:o?24*Number(l)/Number(n):l,className:["lucide",`lucide-${r(e)}`,c].join(" "),...m},[...t.map(([e,t])=>(0,i.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return a.displayName=`${e}`,a}},3008:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4413:function(e,t,a){Promise.resolve().then(a.bind(a,9262))},9262:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var i=a(7437),s=a(2265),r=a(1396),n=a.n(r),l=a(6691),o=a.n(l),c=a(5922),d=a(3008);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,a(2898).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function u(){let[e,t]=(0,s.useState)({requester_name:"",requester_email:"",is_affiliated:!1,company_name:"",position_name:"",collective_agreement:""}),[a,r]=(0,s.useState)([]),[l,u]=(0,s.useState)(!1),[h,f]=(0,s.useState)(!1),p=async t=>{t.preventDefault(),f(!0);try{let{data:t,error:i}=await c.O.from("requests").insert([e]).select().maybeSingle();if(i)throw i;if(a.length>0&&t)for(let e of a){let a="".concat(t.id,"/").concat(Date.now(),"_").concat(e.name),{error:i}=await c.O.storage.from("solicitud-archivos").upload(a,e);if(i)throw i;await c.O.from("request_files").insert([{request_id:t.id,file_name:e.name,file_path:a,file_type:e.type.includes("pdf")?"pdf":"other"}])}try{await c.O.functions.invoke("send-notification-email",{body:{requestId:t.id,requesterEmail:t.requester_email,requesterName:t.requester_name,companyName:t.company_name,positionName:t.position_name}})}catch(e){console.error("Error al enviar notificaciones:",e)}u(!0)}catch(e){console.error("Error al enviar solicitud:",e),alert("Error al enviar la solicitud. Por favor, int\xe9ntelo de nuevo.")}finally{f(!1)}};return l?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md text-center",children:[(0,i.jsx)(d.Z,{className:"text-green-500 mx-auto mb-4",size:64}),(0,i.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Solicitud Enviada"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Su solicitud ha sido enviada correctamente. Nuestro equipo t\xe9cnico la revisar\xe1 y se pondr\xe1 en contacto con usted pronto."}),(0,i.jsx)(n(),{href:"/",className:"btn-primary",children:"Volver al Inicio"})]})}):(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)("header",{className:"bg-white shadow-sm",children:(0,i.jsx)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:(0,i.jsxs)(n(),{href:"/",className:"flex items-center space-x-4",children:[(0,i.jsx)(o(),{src:"/ugt-logo.jpg",alt:"UGT Logo",width:60,height:60,className:"object-contain"}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-ugt-red",children:"Eval\xfaaPro UGT"})]})})}),(0,i.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,i.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold mb-8",children:"Solicitar Valoraci\xf3n de Puesto de Trabajo"}),(0,i.jsxs)("form",{onSubmit:p,className:"card space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Nombre Completo *"}),(0,i.jsx)("input",{type:"text",required:!0,className:"input-field",value:e.requester_name,onChange:a=>t({...e,requester_name:a.target.value})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Email *"}),(0,i.jsx)("input",{type:"email",required:!0,className:"input-field",value:e.requester_email,onChange:a=>t({...e,requester_email:a.target.value})})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"affiliated",className:"mr-2",checked:e.is_affiliated,onChange:a=>t({...e,is_affiliated:a.target.checked})}),(0,i.jsx)("label",{htmlFor:"affiliated",children:"Soy afiliado/a de UGT"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Empresa *"}),(0,i.jsx)("input",{type:"text",required:!0,className:"input-field",value:e.company_name,onChange:a=>t({...e,company_name:a.target.value})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Puesto a Valorar *"}),(0,i.jsx)("input",{type:"text",required:!0,className:"input-field",value:e.position_name,onChange:a=>t({...e,position_name:a.target.value})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Convenio Colectivo *"}),(0,i.jsx)("input",{type:"text",required:!0,className:"input-field",value:e.collective_agreement,onChange:a=>t({...e,collective_agreement:a.target.value})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Archivos Adjuntos (PDF/DPT)"}),(0,i.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,i.jsx)(m,{className:"mx-auto mb-2 text-gray-400",size:32}),(0,i.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.dpt",onChange:e=>r(Array.from(e.target.files||[])),className:"hidden",id:"file-upload"}),(0,i.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer text-ugt-red hover:underline",children:"Seleccionar archivos"}),a.length>0&&(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("p",{className:"text-sm font-semibold mb-2",children:[a.length," archivo(s) seleccionado(s):"]}),(0,i.jsx)("ul",{className:"text-sm text-gray-600",children:a.map((e,t)=>(0,i.jsx)("li",{children:e.name},t))})]})]})]}),(0,i.jsx)("button",{type:"submit",disabled:h,className:"btn-primary w-full",children:h?"Enviando...":"Enviar Solicitud"})]})]})})]})}},5922:function(e,t,a){"use strict";a.d(t,{O:function(){return i}});let i=(0,a(359).eI)("https://ebiqbjgrmjdkwlckmpuj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImViaXFiamdybWpka3dsY2ttcHVqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMjkyMDUsImV4cCI6MjA3NzYwNTIwNX0.OBCL4RWR3A536ZZrAof_tI5QNDYRJeA5x6HXv-P4d6s")},7447:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{unstable_getImgProps:function(){return o},default:function(){return c}});let i=a(1024),s=a(8630),r=a(6184),n=a(1749),l=i._(a(536)),o=e=>{(0,r.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,s.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}},c=n.Image},6691:function(e,t,a){e.exports=a(7447)},1396:function(e,t,a){e.exports=a(5250)}},function(e){e.O(0,[673,250,749,971,938,744],function(){return e(e.s=4413)}),_N_E=e.O()}]);