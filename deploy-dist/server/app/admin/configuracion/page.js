(()=>{var e={};e.id=956,e.ids=[956],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},4919:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var s=a(482),i=a(9108),r=a(2563),n=a.n(r),o=a(8300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(t,l);let c=["",{children:["admin",{children:["configuracion",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9772)),"/workspace/evaluapro-ugt/app/admin/configuracion/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,4655)),"/workspace/evaluapro-ugt/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,8762)),"/workspace/evaluapro-ugt/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/workspace/evaluapro-ugt/app/admin/configuracion/page.tsx"],u="/admin/configuracion/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/configuracion/page",pathname:"/admin/configuracion",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4424:(e,t,a)=>{Promise.resolve().then(a.bind(a,8180))},3196:(e,t,a)=>{Promise.resolve().then(a.bind(a,6368))},3582:(e,t,a)=>{Promise.resolve().then(a.bind(a,2079))},8680:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2583,23)),Promise.resolve().then(a.t.bind(a,6840,23)),Promise.resolve().then(a.t.bind(a,8771,23)),Promise.resolve().then(a.t.bind(a,3225,23)),Promise.resolve().then(a.t.bind(a,9295,23)),Promise.resolve().then(a.t.bind(a,3982,23))},8180:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(5344),i=a(3729),r=a(783),n=a.n(r),o=a(2254),l=a(2829),c=a(2079),d=a(8120),u=a(9224);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,u.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),x=(0,u.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),p=(0,u.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var h=a(1498);function v(){let{user:e,signOut:t}=(0,c.useAuth)(),a=(0,o.useRouter)(),[r,u]=(0,i.useState)(!1),[v,f]=(0,i.useState)("contenido"),[b,g]=(0,i.useState)({quienes_somos_titulo:"",quienes_somos_contenido:"",tecnico_nombre:"",tecnico_titulacion:"",tecnico_email:"",tecnico_telefono:""}),[j,y]=(0,i.useState)([]),[_,N]=(0,i.useState)([]);(0,i.useEffect)(()=>{w()},[]);let w=async()=>{let{data:e}=await l.O.from("site_content").select("*");if(e){let t={};e.forEach(e=>{t[e.content_key]=e.content_value}),g(t)}let{data:t}=await l.O.from("evaluation_factors").select("*").order("subfactor_name");t&&y(t);let{data:a}=await l.O.from("profiles").select("*").order("created_at",{ascending:!1});a&&N(a)},k=async()=>{u(!0);try{for(let[e,t]of Object.entries(b))await l.O.from("site_content").upsert({content_key:e,content_value:t},{onConflict:"content_key"});alert("Contenido guardado exitosamente")}catch(e){alert("Error al guardar contenido")}finally{u(!1)}},C=async(e,t)=>{await l.O.from("evaluation_factors").update({is_active:!t}).eq("factor_id",e),w()},P=async(e,t)=>{await l.O.from("profiles").update({is_active:!t}).eq("id",e),w()},q=async()=>{let{data:e}=await l.O.from("evaluations").select("*");if(e){let t=e.map(e=>[e.id,e.eval_company_name,e.eval_position_name,e.total_score,e.final_group,new Date(e.created_at).toLocaleDateString("es-ES")]),a="ID,Empresa,Puesto,Puntuaci\xf3n Total,Grupo Final,Fecha\n";t.forEach(e=>{a+=e.join(",")+"\n"});let s=new Blob([a],{type:"text/csv"}),i=window.URL.createObjectURL(s),r=document.createElement("a");r.href=i,r.download=`evaluaciones_${new Date().toISOString().split("T")[0]}.csv`,r.click(),window.URL.revokeObjectURL(i)}},S=async()=>{await t(),a.push("/")};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-ugt-red text-white",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Configuraci\xf3n - Eval\xfaaPro UGT"}),s.jsx("p",{className:"text-sm opacity-90 mt-1",children:"Gesti\xf3n del sistema"})]}),(0,s.jsxs)("nav",{className:"flex space-x-4",children:[s.jsx(n(),{href:"/admin/dashboard",className:"hover:underline",children:"Dashboard"}),s.jsx(n(),{href:"/admin/configuracion",className:"hover:underline font-semibold",children:"Configuraci\xf3n"}),(0,s.jsxs)("button",{onClick:S,className:"hover:underline flex items-center",children:[s.jsx(d.Z,{size:16,className:"mr-1"})," Salir"]})]})]})})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex space-x-4 mb-6",children:[(0,s.jsxs)("button",{onClick:()=>f("contenido"),className:`px-4 py-2 rounded ${"contenido"===v?"bg-ugt-red text-white":"bg-white"}`,children:[s.jsx(m,{className:"inline mr-2",size:16}),"Contenido del Sitio"]}),s.jsx("button",{onClick:()=>f("factores"),className:`px-4 py-2 rounded ${"factores"===v?"bg-ugt-red text-white":"bg-white"}`,children:"Factores TLC"}),(0,s.jsxs)("button",{onClick:()=>f("usuarios"),className:`px-4 py-2 rounded ${"usuarios"===v?"bg-ugt-red text-white":"bg-white"}`,children:[s.jsx(x,{className:"inline mr-2",size:16}),"Usuarios"]}),(0,s.jsxs)("button",{onClick:()=>f("exportar"),className:`px-4 py-2 rounded ${"exportar"===v?"bg-ugt-red text-white":"bg-white"}`,children:[s.jsx(p,{className:"inline mr-2",size:16}),"Exportar Datos"]})]}),"contenido"===v&&(0,s.jsxs)("div",{className:"card",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Editar Contenido del Sitio"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block font-semibold mb-2",children:'T\xedtulo "Qui\xe9nes Somos"'}),s.jsx("input",{type:"text",className:"input-field",value:b.quienes_somos_titulo,onChange:e=>g({...b,quienes_somos_titulo:e.target.value})})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block font-semibold mb-2",children:'Contenido "Qui\xe9nes Somos"'}),s.jsx("textarea",{className:"input-field",rows:6,value:b.quienes_somos_contenido,onChange:e=>g({...b,quienes_somos_contenido:e.target.value})})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:"Informaci\xf3n del T\xe9cnico"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block font-semibold mb-2",children:"Nombre"}),s.jsx("input",{type:"text",className:"input-field",value:b.tecnico_nombre,onChange:e=>g({...b,tecnico_nombre:e.target.value})})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block font-semibold mb-2",children:"Titulaci\xf3n"}),s.jsx("input",{type:"text",className:"input-field",value:b.tecnico_titulacion,onChange:e=>g({...b,tecnico_titulacion:e.target.value})})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block font-semibold mb-2",children:"Email"}),s.jsx("input",{type:"email",className:"input-field",value:b.tecnico_email,onChange:e=>g({...b,tecnico_email:e.target.value})})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block font-semibold mb-2",children:"Tel\xe9fono"}),s.jsx("input",{type:"tel",className:"input-field",value:b.tecnico_telefono,onChange:e=>g({...b,tecnico_telefono:e.target.value})})]})]})]}),(0,s.jsxs)("button",{onClick:k,disabled:r,className:"btn-primary flex items-center",children:[s.jsx(h.Z,{className:"mr-2",size:20}),r?"Guardando...":"Guardar Cambios"]})]})]}),"factores"===v&&(0,s.jsxs)("div",{className:"card",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Gesti\xf3n de Factores TLC"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Activar o desactivar factores de evaluaci\xf3n"}),s.jsx("div",{className:"space-y-3",children:j.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-semibold",children:e.subfactor_name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.is_direct_indirect_specific?e.subfactor_name.includes(".a")?"Indirecto":"Directo":"Com\xfan"})]}),s.jsx("button",{onClick:()=>C(e.factor_id,e.is_active),className:`px-4 py-2 rounded ${e.is_active?"bg-green-500 text-white":"bg-gray-300"}`,children:e.is_active?"Activo":"Inactivo"})]},e.factor_id))})]}),"usuarios"===v&&(0,s.jsxs)("div",{className:"card",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Gesti\xf3n de Usuarios T\xe9cnicos"}),s.jsx("div",{className:"space-y-3",children:_.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-semibold",children:e.full_name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.email}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Rol: ",e.role]})]}),s.jsx("button",{onClick:()=>P(e.id,e.is_active),className:`px-4 py-2 rounded ${e.is_active?"bg-green-500 text-white":"bg-gray-300"}`,children:e.is_active?"Activo":"Inactivo"})]},e.id))})]}),"exportar"===v&&(0,s.jsxs)("div",{className:"card",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Exportar Datos"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Descargue los datos del sistema en formato CSV"}),s.jsx("div",{className:"space-y-4",children:(0,s.jsxs)("button",{onClick:q,className:"btn-primary flex items-center",children:[s.jsx(p,{className:"mr-2",size:20}),"Exportar Valoraciones a CSV"]})})]})]})]})}},6368:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(5344),i=a(3729),r=a(2254),n=a(2079);function o({children:e}){let{user:t,loading:a}=(0,n.useAuth)(),o=(0,r.useRouter)();return((0,i.useEffect)(()=>{a||t||o.push("/login")},[t,a,o]),a)?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-ugt-red mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Verificando autenticaci\xf3n..."})]})}):t?s.jsx(s.Fragment,{children:e}):null}},2079:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AuthProvider:()=>o,useAuth:()=>l});var s=a(5344),i=a(3729),r=a(2829);let n=(0,i.createContext)(void 0);function o({children:e}){let[t,a]=(0,i.useState)(null),[o,l]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async function(){l(!0);try{let{data:{user:e}}=await r.O.auth.getUser();a(e)}finally{l(!1)}})();let{data:{subscription:e}}=r.O.auth.onAuthStateChange((e,t)=>{a(t?.user||null)});return()=>e.unsubscribe()},[]);let c=async(e,t)=>{let{data:a,error:s}=await r.O.auth.signInWithPassword({email:e,password:t});if(s)throw s;return a},d=async(e,t,a)=>{if(!e.endsWith("@ugt.es"))throw Error("Solo se permiten correos del dominio @ugt.es");let{data:s,error:i}=await r.O.auth.signUp({email:e,password:t,options:{data:{full_name:a}}});if(i)throw i;return s.user&&await r.O.from("profiles").insert([{id:s.user.id,email:s.user.email,full_name:a,role:"tecnico",is_active:!0}]),s},u=async()=>{await r.O.auth.signOut()};return s.jsx(n.Provider,{value:{user:t,loading:o,signIn:c,signUp:d,signOut:u},children:e})}function l(){let e=(0,i.useContext)(n);if(void 0===e)throw Error("useAuth debe usarse dentro de un AuthProvider");return e}},2829:(e,t,a)=>{"use strict";a.d(t,{O:()=>s});let s=(0,a(6725).eI)("https://ebiqbjgrmjdkwlckmpuj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImViaXFiamdybWpka3dsY2ttcHVqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMjkyMDUsImV4cCI6MjA3NzYwNTIwNX0.OBCL4RWR3A536ZZrAof_tI5QNDYRJeA5x6HXv-P4d6s")},9224:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(3729),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let a=(0,s.forwardRef)(({color:a="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d,...u},m)=>(0,s.createElement)("svg",{ref:m,...i,width:n,height:n,stroke:a,strokeWidth:l?24*Number(o)/Number(n):o,className:["lucide",`lucide-${r(e)}`,c].join(" "),...u},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return a.displayName=`${e}`,a}},8120:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(9224).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},1498:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(9224).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},783:(e,t,a)=>{e.exports=a(1476)},2254:(e,t,a)=>{e.exports=a(4767)},9772:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>r,__esModule:()=>i,default:()=>n});let s=(0,a(6843).createProxy)(String.raw`/workspace/evaluapro-ugt/app/admin/configuracion/page.tsx`),{__esModule:i,$$typeof:r}=s,n=s.default},4655:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(5036);let i=(0,a(6843).createProxy)(String.raw`/workspace/evaluapro-ugt/components/ProtectedRoute.tsx`),{__esModule:r,$$typeof:n}=i,o=i.default;function l({children:e}){return s.jsx(o,{children:e})}},8762:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m,metadata:()=>u});var s=a(5036),i=a(8592),r=a.n(i);a(7272);var n=a(6843);let o=(0,n.createProxy)(String.raw`/workspace/evaluapro-ugt/lib/auth-context.tsx`),{__esModule:l,$$typeof:c}=o;o.default;let d=(0,n.createProxy)(String.raw`/workspace/evaluapro-ugt/lib/auth-context.tsx#AuthProvider`);(0,n.createProxy)(String.raw`/workspace/evaluapro-ugt/lib/auth-context.tsx#useAuth`);let u={title:"Eval\xfaaPro UGT - Valoraci\xf3n de Puestos de Trabajo",description:"Plataforma de valoraci\xf3n de puestos de trabajo seg\xfan el Manual TLC para UGT"};function m({children:e}){return s.jsx("html",{lang:"es",children:s.jsx("body",{className:r().className,children:s.jsx(d,{children:e})})})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[591,476],()=>a(4919));module.exports=s})();