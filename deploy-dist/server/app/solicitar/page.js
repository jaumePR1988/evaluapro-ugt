(()=>{var e={};e.id=680,e.ids=[680],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},6262:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var a=r(482),s=r(9108),i=r(2563),n=r.n(i),o=r(8300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["solicitar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7742)),"/workspace/evaluapro-ugt/app/solicitar/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8762)),"/workspace/evaluapro-ugt/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/workspace/evaluapro-ugt/app/solicitar/page.tsx"],u="/solicitar/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/solicitar/page",pathname:"/solicitar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6654:(e,t,r)=>{Promise.resolve().then(r.bind(r,8429))},3582:(e,t,r)=>{Promise.resolve().then(r.bind(r,2079))},8680:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},8429:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a=r(5344),s=r(3729),i=r(783),n=r.n(i),o=r(1223),l=r.n(o),c=r(2829),d=r(7060);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,r(9224).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function m(){let[e,t]=(0,s.useState)({requester_name:"",requester_email:"",is_affiliated:!1,company_name:"",position_name:"",collective_agreement:""}),[r,i]=(0,s.useState)([]),[o,m]=(0,s.useState)(!1),[p,x]=(0,s.useState)(!1),h=async t=>{t.preventDefault(),x(!0);try{let{data:t,error:a}=await c.O.from("requests").insert([e]).select().maybeSingle();if(a)throw a;if(r.length>0&&t)for(let e of r){let r=`${t.id}/${Date.now()}_${e.name}`,{error:a}=await c.O.storage.from("solicitud-archivos").upload(r,e);if(a)throw a;await c.O.from("request_files").insert([{request_id:t.id,file_name:e.name,file_path:r,file_type:e.type.includes("pdf")?"pdf":"other"}])}try{await c.O.functions.invoke("send-notification-email",{body:{requestId:t.id,requesterEmail:t.requester_email,requesterName:t.requester_name,companyName:t.company_name,positionName:t.position_name}})}catch(e){console.error("Error al enviar notificaciones:",e)}m(!0)}catch(e){console.error("Error al enviar solicitud:",e),alert("Error al enviar la solicitud. Por favor, int\xe9ntelo de nuevo.")}finally{x(!1)}};return o?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md text-center",children:[a.jsx(d.Z,{className:"text-green-500 mx-auto mb-4",size:64}),a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Solicitud Enviada"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Su solicitud ha sido enviada correctamente. Nuestro equipo t\xe9cnico la revisar\xe1 y se pondr\xe1 en contacto con usted pronto."}),a.jsx(n(),{href:"/",className:"btn-primary",children:"Volver al Inicio"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("header",{className:"bg-white shadow-sm",children:a.jsx("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:(0,a.jsxs)(n(),{href:"/",className:"flex items-center space-x-4",children:[a.jsx(l(),{src:"/ugt-logo.jpg",alt:"UGT Logo",width:60,height:60,className:"object-contain"}),a.jsx("h1",{className:"text-2xl font-bold text-ugt-red",children:"Eval\xfaaPro UGT"})]})})}),a.jsx("div",{className:"container mx-auto px-4 py-12",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto",children:[a.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Solicitar Valoraci\xf3n de Puesto de Trabajo"}),(0,a.jsxs)("form",{onSubmit:h,className:"card space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nombre Completo *"}),a.jsx("input",{type:"text",required:!0,className:"input-field",value:e.requester_name,onChange:r=>t({...e,requester_name:r.target.value})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Email *"}),a.jsx("input",{type:"email",required:!0,className:"input-field",value:e.requester_email,onChange:r=>t({...e,requester_email:r.target.value})})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"affiliated",className:"mr-2",checked:e.is_affiliated,onChange:r=>t({...e,is_affiliated:r.target.checked})}),a.jsx("label",{htmlFor:"affiliated",children:"Soy afiliado/a de UGT"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Empresa *"}),a.jsx("input",{type:"text",required:!0,className:"input-field",value:e.company_name,onChange:r=>t({...e,company_name:r.target.value})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Puesto a Valorar *"}),a.jsx("input",{type:"text",required:!0,className:"input-field",value:e.position_name,onChange:r=>t({...e,position_name:r.target.value})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Convenio Colectivo *"}),a.jsx("input",{type:"text",required:!0,className:"input-field",value:e.collective_agreement,onChange:r=>t({...e,collective_agreement:r.target.value})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Archivos Adjuntos (PDF/DPT)"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[a.jsx(u,{className:"mx-auto mb-2 text-gray-400",size:32}),a.jsx("input",{type:"file",multiple:!0,accept:".pdf,.dpt",onChange:e=>i(Array.from(e.target.files||[])),className:"hidden",id:"file-upload"}),a.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer text-ugt-red hover:underline",children:"Seleccionar archivos"}),r.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold mb-2",children:[r.length," archivo(s) seleccionado(s):"]}),a.jsx("ul",{className:"text-sm text-gray-600",children:r.map((e,t)=>a.jsx("li",{children:e.name},t))})]})]})]}),a.jsx("button",{type:"submit",disabled:p,className:"btn-primary w-full",children:p?"Enviando...":"Enviar Solicitud"})]})]})})]})}},2079:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthProvider:()=>o,useAuth:()=>l});var a=r(5344),s=r(3729),i=r(2829);let n=(0,s.createContext)(void 0);function o({children:e}){let[t,r]=(0,s.useState)(null),[o,l]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async function(){l(!0);try{let{data:{user:e}}=await i.O.auth.getUser();r(e)}finally{l(!1)}})();let{data:{subscription:e}}=i.O.auth.onAuthStateChange((e,t)=>{r(t?.user||null)});return()=>e.unsubscribe()},[]);let c=async(e,t)=>{let{data:r,error:a}=await i.O.auth.signInWithPassword({email:e,password:t});if(a)throw a;return r},d=async(e,t,r)=>{if(!e.endsWith("@ugt.es"))throw Error("Solo se permiten correos del dominio @ugt.es");let{data:a,error:s}=await i.O.auth.signUp({email:e,password:t,options:{data:{full_name:r}}});if(s)throw s;return a.user&&await i.O.from("profiles").insert([{id:a.user.id,email:a.user.email,full_name:r,role:"tecnico",is_active:!0}]),a},u=async()=>{await i.O.auth.signOut()};return a.jsx(n.Provider,{value:{user:t,loading:o,signIn:c,signUp:d,signOut:u},children:e})}function l(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth debe usarse dentro de un AuthProvider");return e}},2829:(e,t,r)=>{"use strict";r.d(t,{O:()=>a});let a=(0,r(6725).eI)("https://ebiqbjgrmjdkwlckmpuj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImViaXFiamdybWpka3dsY2ttcHVqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMjkyMDUsImV4cCI6MjA3NzYwNTIwNX0.OBCL4RWR3A536ZZrAof_tI5QNDYRJeA5x6HXv-P4d6s")},9224:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r(3729),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let r=(0,a.forwardRef)(({color:r="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d,...u},m)=>(0,a.createElement)("svg",{ref:m,...s,width:n,height:n,stroke:r,strokeWidth:l?24*Number(o)/Number(n):o,className:["lucide",`lucide-${i(e)}`,c].join(" "),...u},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r}},7060:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(9224).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7412:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{unstable_getImgProps:function(){return l},default:function(){return c}});let a=r(9694),s=r(3855),i=r(837),n=r(1900),o=a._(r(4931)),l=e=>{(0,i.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,s.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}},c=n.Image},1223:(e,t,r)=>{e.exports=r(7412)},783:(e,t,r)=>{e.exports=r(1476)},8762:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m,metadata:()=>u});var a=r(5036),s=r(8592),i=r.n(s);r(7272);var n=r(6843);let o=(0,n.createProxy)(String.raw`/workspace/evaluapro-ugt/lib/auth-context.tsx`),{__esModule:l,$$typeof:c}=o;o.default;let d=(0,n.createProxy)(String.raw`/workspace/evaluapro-ugt/lib/auth-context.tsx#AuthProvider`);(0,n.createProxy)(String.raw`/workspace/evaluapro-ugt/lib/auth-context.tsx#useAuth`);let u={title:"Eval\xfaaPro UGT - Valoraci\xf3n de Puestos de Trabajo",description:"Plataforma de valoraci\xf3n de puestos de trabajo seg\xfan el Manual TLC para UGT"};function m({children:e}){return a.jsx("html",{lang:"es",children:a.jsx("body",{className:i().className,children:a.jsx(d,{children:e})})})}},7742:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>s,default:()=>n});let a=(0,r(6843).createProxy)(String.raw`/workspace/evaluapro-ugt/app/solicitar/page.tsx`),{__esModule:s,$$typeof:i}=a,n=a.default},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[591,476,900],()=>r(6262));module.exports=a})();